require=function i(n,s,l){function a(t,o){if(!s[t]){if(!n[t]){var c="function"==typeof require&&require;if(!o&&c)return c(t,!0);if(p)return p(t,!0);var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var r=s[t]={exports:{}};n[t][0].call(r.exports,function(o){return a(n[t][1][o]||o)},r,r.exports,i,n,s,l)}return s[t].exports}for(var p="function"==typeof require&&require,o=0;o<l.length;o++)a(l[o]);return a}({block:[function(o,t,c){"use strict";cc._RF.push(t,"4a38b/ceXJLJpvBetbVFtKl","block"),Object.defineProperty(c,"__esModule",{value:!0});var e=o("./colors"),r=cc._decorator,i=r.ccclass,n=r.property,s=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.number=null,o}return __extends(o,t),o.prototype.start=function(){},o.prototype.setNumber=function(o){0==o&&(this.number.node.active=!1),this.number.string=o,e.default[o]&&(this.node.color=e.default[o])},__decorate([n(cc.Label)],o.prototype,"number",void 0),o=__decorate([i],o)}(cc.Component);c.default=s,cc._RF.pop()},{"./colors":"colors"}],colors:[function(o,t,c){"use strict";cc._RF.push(t,"85da6RGVxZIe6DLUjU71BRY","colors"),Object.defineProperty(c,"__esModule",{value:!0});var e=[];e[0]=cc.color(198,184,172),e[2]=cc.color(235,224,213),e[4]=cc.color(234,219,192),e[8]=cc.color(248,167,110),e[16]=cc.color(244,138,89),e[32]=cc.color(245,112,85),e[64]=cc.color(235,200,103),e[128]=cc.color(198,184,172),e[256]=cc.color(198,184,172),e[512]=cc.color(198,184,172),e[1024]=cc.color(198,184,172),e[2048]=cc.color(198,184,172),c.default=e,cc._RF.pop()},{}],game:[function(o,t,c){"use strict";cc._RF.push(t,"cb48bujkFFMRZr+TwiAAcSj","game"),Object.defineProperty(c,"__esModule",{value:!0});var e=cc._decorator,r=e.ccclass,i=e.property,n=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.bg=null,o.scoreLabel=null,o.score=0,o.blockPrefab=null,o.gap=20,o}return __extends(o,t),o.prototype.start=function(){this.drawBlocks(),this.init(),this.addEventHandler()},o.prototype.drawBlocks=function(){this.blockSize=(cc.winSize.width-5*this.gap)/4;var o=this.gap+this.blockSize/2,t=this.blockSize;this.positions=[];for(var c=0;c<4;++c){this.positions.push([0,0,0,0]);for(var e=0;e<4;++e){var r=cc.instantiate(this.blockPrefab);r.width=this.blockSize,r.height=this.blockSize,this.bg.addChild(r),r.setPosition(cc.p(o,t)),this.positions[c][e]=cc.p(o,t),o+=this.gap+this.blockSize,r.getComponent("block").setNumber(0)}t+=this.gap+this.blockSize,o=this.gap+this.blockSize/2}},o.prototype.init=function(){if(this.updateScore(0),this.blocks)for(var o=0;o<this.blocks.length;o++)for(var t=0;t<this.blocks[o].length;t++)null!=this.blocks[o][t]&&this.blocks[o][t].destory();this.data=[],this.blocks=[];for(o=0;o<4;++o)this.data.push([0,0,0,0]),this.blocks.push([null,null,null,null]);this.addBlock(),this.addBlock(),this.addBlock()},o.prototype.getEmptyLocation=function(){for(var o=[],t=0;t<this.blocks.length;t++)for(var c=0;c<this.blocks[t].length;c++)null==this.blocks[t][c]&&o.push({x:t,y:c});return o},o.prototype.addBlock=function(){var o=this.getEmptyLocation();if(o.length){var t=o[Math.floor(cc.random0To1()*o.length)],c=t.x,e=t.y,r=this.positions[c][e],i=cc.instantiate(this.blockPrefab);i.width=this.blockSize,i.height=this.blockSize,this.bg.addChild(i),i.setPosition(r);var n=.5<cc.random0To1()?2:4;i.getComponent("block").setNumber(n),this.blocks[c][e]=i,this.data[c][e]=n}},o.prototype.updateScore=function(o){this.score=o,this.scoreLabel.string="分数: "+o},o.prototype.addEventHandler=function(){var c=this;this.bg.on("touchstart",function(o){c.startPoint=o.getLocation()}),this.bg.on("touchend",function(o){c.endPoint=o.getLocation();var t=cc.pSub(c.endPoint,c.startPoint);50<cc.pLength(t)&&(Math.abs(t.x)>Math.abs(t.y)?0<t.x?c.moveRight():c.moveLeft():0<t.y?c.moveUp():c.moveDown())})},o.prototype.moveLeft=function(){cc.log("move left"),cc.log(this.data)},o.prototype.moveRight=function(){cc.log("move right")},o.prototype.moveUp=function(){cc.log("move up")},o.prototype.moveDown=function(){cc.log("move down")},__decorate([i(cc.Node)],o.prototype,"bg",void 0),__decorate([i(cc.Label)],o.prototype,"scoreLabel",void 0),__decorate([i],o.prototype,"score",void 0),__decorate([i(cc.Prefab)],o.prototype,"blockPrefab",void 0),__decorate([i],o.prototype,"gap",void 0),o=__decorate([r],o)}(cc.Component);c.default=n,cc._RF.pop()},{}]},{},["block","colors","game"]);